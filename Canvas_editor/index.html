<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- <link rel="stylesheet" type="text/css" media="screen" href="main.css" /> -->
  <!-- <script src="main.js"></script> -->
</head>

<body>
  <input type="file" name="" id="plik">
  <button id="start">show me</button>
  <canvas class="ps" width="600" height="300"></canvas>
  <div class="container">
    <input type="range" min="0" max="100" value="0" id="slider1">
    <span class="text">0</span>
  </div>
  <!-- <div class="container">
    <input type="range" min="1" max="100" value="50" id="">
    <span class="text"></span>
  </div>
  <div class="container">
    <input type="range" min="1" max="100" value="50" id="">
    <span class="text"></span>
  </div> -->

  <script>

    const canv = /** @type {HTMLCanvasElement} */ (document.querySelector('.ps'))
    const ctx = canv.getContext('2d')
    let imgData = {}

    let img = new Image()
    img.src = './jesien.jpeg'

    img.addEventListener('load', () => {
      ctx.drawImage(img, 0, 0, canv.width, canv.height)
      imgData = ctx.getImageData(0, 0, canv.width, canv.height)
      ctx.filter = 'sepia(100%)'
    })

    let slider = document.querySelector('#slider1')
    slider.addEventListener('change', (e) => document.querySelector('.text').innerHTML = slider.value )

    document.querySelector('#start').addEventListener('click', contrast)

    function contrast() {
      

      let imgData2 =  new ImageData(new Uint8ClampedArray(imgData.data), imgData.width, imgData.height)
      let factor = slider.value
      
      if (factor >= 1) {
        for (let i = 0; i < imgData2.data.length; i += 4) {
        
        imgData2.data[i] = Math.min(255, imgData.data[i] + factor)
        imgData2.data[i + 1] = Math.min(255, imgData.data[i + 1] + factor)
        imgData2.data[i + 2] = Math.min(255, imgData.data[i + 2] + factor)
        
      } 
      
      ctx.putImageData(imgData2, 0, 0)
    } else {
        ctx.putImageData(imgData, 0, 0)
      }

      // console.log(imgData)
      // console.log(imgData2)
      }


    function saturation() {
      // let imgData = ctx.getImageData(0, 0, canv.width, canv.height)

      // for (let i = 0; i < imgData.data.length; i += 4) {

      // }
      ctx.filter = 'contrast(50%)';
        console.log('clicked')
    }

  </script>
</body>

</html>